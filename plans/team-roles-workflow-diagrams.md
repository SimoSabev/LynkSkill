# Team Roles Workflow - Visual Diagrams

## ğŸ”„ Current vs New Onboarding Flow

### Current Flow (Before)
```
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   User Sign Up   â”‚
                        â”‚    (Clerk)       â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Onboarding     â”‚
                        â”‚  Role Selection â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                                      â”‚
              â–¼                                      â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   STUDENT     â”‚                    â”‚   COMPANY     â”‚
      â”‚   Path        â”‚                    â”‚   Path        â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                      â”‚
              â–¼                                      â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  Enter DOB    â”‚                    â”‚ Enter Company â”‚
      â”‚  (Age Check)  â”‚                    â”‚   Details     â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                      â”‚
              â–¼                                      â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   Accept TOS  â”‚                    â”‚  Create Co.   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚  + OWNER role â”‚
              â”‚                                      â”‚
              â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â–¼                                      â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â–¼
      â”‚  /dashboard/  â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   student     â”‚                    â”‚  /dashboard/  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚   company     â”‚
                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### New Flow (After)
```
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   User Sign Up   â”‚
                        â”‚    (Clerk)       â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Onboarding     â”‚
                        â”‚  Role Selection â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                         â”‚                         â”‚
       â–¼                         â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STUDENT    â”‚          â”‚  COMPANY    â”‚          â”‚ TEAM_MEMBER â”‚ â† NEW!
â”‚  Path       â”‚          â”‚  Path       â”‚          â”‚   Path      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                        â”‚                         â”‚
       â–¼                        â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Enter DOB   â”‚          â”‚Enter Companyâ”‚          â”‚ Enter Code  â”‚ â† NEW!
â”‚ (Age Check) â”‚          â”‚  Details    â”‚          â”‚XXXX-XXXX-   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â”‚XXXX-XXXX    â”‚
       â”‚                        â”‚                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â–¼                        â–¼                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â–¼
â”‚ Accept TOS  â”‚          â”‚ Create Co.  â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â”‚ + Gen Code  â”‚ â† NEW!   â”‚ Validate &  â”‚
       â”‚                 â”‚ + OWNER     â”‚          â”‚ Preview Co. â”‚
       â–¼                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚                         â”‚
â”‚ /dashboard/ â”‚                 â–¼                         â–¼
â”‚  student    â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ /dashboard/ â”‚          â”‚ Join as     â”‚
                         â”‚  company    â”‚          â”‚ MEMBER role â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                                         â–¼
                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                  â”‚ /dashboard/ â”‚
                                                  â”‚  company    â”‚
                                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”‘ Code Generation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Company Creation Flow                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  User fills company details                                      â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  generateCompanyCode()                               â”‚        â”‚
â”‚  â”‚                                                      â”‚        â”‚
â”‚  â”‚  Chars: ABCDEFGHJKLMNPQRSTUVWXYZ23456789            â”‚        â”‚
â”‚  â”‚  (excludes: 0, O, 1, I, L for clarity)              â”‚        â”‚
â”‚  â”‚                                                      â”‚        â”‚
â”‚  â”‚  crypto.getRandomValues() â†’ 4 segments Ã— 4 chars    â”‚        â”‚
â”‚  â”‚                                                      â”‚        â”‚
â”‚  â”‚  Output: ABCD-EFGH-IJKL-MNOP                        â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  prisma.company.create({                            â”‚        â”‚
â”‚  â”‚    data: {                                          â”‚        â”‚
â”‚  â”‚      name: "...",                                   â”‚        â”‚
â”‚  â”‚      invitationCode: "ABCD-EFGH-IJKL-MNOP",        â”‚        â”‚
â”‚  â”‚      codeEnabled: true,                             â”‚        â”‚
â”‚  â”‚      codeUsageCount: 0                              â”‚        â”‚
â”‚  â”‚    }                                                â”‚        â”‚
â”‚  â”‚  })                                                 â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  Code stored in DB â†’ Owner can view/manage in settings          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¥ Role Hierarchy & Permissions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Company Role Hierarchy                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   OWNER (100% permissions)                                       â”‚
â”‚     â”‚   â€¢ All permissions                                        â”‚
â”‚     â”‚   â€¢ Transfer ownership                                     â”‚
â”‚     â”‚   â€¢ Delete company                                         â”‚
â”‚     â”‚   â€¢ Manage invitation code                                 â”‚
â”‚     â”‚                                                            â”‚
â”‚     â–¼                                                            â”‚
â”‚   ADMIN (95% permissions)                                        â”‚
â”‚     â”‚   â€¢ All except: transfer ownership, delete company         â”‚
â”‚     â”‚   â€¢ Can manage invitation code                             â”‚
â”‚     â”‚                                                            â”‚
â”‚     â–¼                                                            â”‚
â”‚   HR_MANAGER (60% permissions)                                   â”‚
â”‚     â”‚   â€¢ Internships, applications, interviews                  â”‚
â”‚     â”‚   â€¢ Candidate management                                   â”‚
â”‚     â”‚   â€¢ Cannot manage team/roles                               â”‚
â”‚     â”‚                                                            â”‚
â”‚     â–¼                                                            â”‚
â”‚   HR_RECRUITER (40% permissions)                                 â”‚
â”‚     â”‚   â€¢ Limited application management                         â”‚
â”‚     â”‚   â€¢ View candidates, interviews                            â”‚
â”‚     â”‚                                                            â”‚
â”‚     â–¼                                                            â”‚
â”‚   MEMBER (25% permissions) â† NEW!                                â”‚
â”‚     â”‚   â€¢ Basic view permissions                                 â”‚
â”‚     â”‚   â€¢ Send messages                                          â”‚
â”‚     â”‚   â€¢ View own experiences                                   â”‚
â”‚     â”‚                                                            â”‚
â”‚     â–¼                                                            â”‚
â”‚   VIEWER (15% permissions)                                       â”‚
â”‚         â€¢ Read-only access                                       â”‚
â”‚         â€¢ View company, internships, applications                â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš« Invitation Restrictions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Invitation Rules                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  WHO CAN BE INVITED:                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  âœ… New users (via email)                               â”‚    â”‚
â”‚  â”‚  âœ… TEAM_MEMBER users (via email OR code)               â”‚    â”‚
â”‚  â”‚  âœ… Users with no current company membership            â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  WHO CANNOT BE INVITED:                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  âŒ STUDENT role users                                   â”‚    â”‚
â”‚  â”‚     â†’ "Students cannot be invited to companies"         â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  âŒ COMPANY (owner) role users                          â”‚    â”‚
â”‚  â”‚     â†’ "Company owners cannot join other companies"      â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  âŒ Users already in another company                    â”‚    â”‚
â”‚  â”‚     â†’ "User is already a member of another company"     â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  âŒ Inviting to OWNER role                              â”‚    â”‚
â”‚  â”‚     â†’ "Use ownership transfer instead"                  â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  INVITATION METHODS:                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  Method 1: Email Invitation (existing)                  â”‚    â”‚
â”‚  â”‚  â€¢ Owner/Admin sends email with unique token            â”‚    â”‚
â”‚  â”‚  â€¢ User clicks link â†’ accepts â†’ joins with role         â”‚    â”‚
â”‚  â”‚  â€¢ For: ADMIN, HR_MANAGER, HR_RECRUITER, VIEWER, MEMBER â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  Method 2: Company Code (NEW)                           â”‚    â”‚
â”‚  â”‚  â€¢ Team member enters code during onboarding            â”‚    â”‚
â”‚  â”‚  â€¢ Automatically joins as MEMBER role                   â”‚    â”‚
â”‚  â”‚  â€¢ For: MEMBER role only (self-service)                 â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Team Member Join Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Team Member Code Join Flow                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  1. User selects "Team Member" in onboarding                     â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Enter Company Code                                  â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”                       â”‚        â”‚
â”‚  â”‚  â”‚ABCDâ”‚-â”‚EFGHâ”‚-â”‚IJKLâ”‚-â”‚MNOPâ”‚                       â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜                       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  2. Client-side validation (format check)                        â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  3. API Request: POST /api/company/join                          â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Server Validation:                                  â”‚        â”‚
â”‚  â”‚  âœ“ Code format valid?                               â”‚        â”‚
â”‚  â”‚  âœ“ Code exists in DB?                               â”‚        â”‚
â”‚  â”‚  âœ“ Code enabled?                                    â”‚        â”‚
â”‚  â”‚  âœ“ Code not expired?                                â”‚        â”‚
â”‚  â”‚  âœ“ Company not at max members?                      â”‚        â”‚
â”‚  â”‚  âœ“ User not already in a company?                   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                                                        â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚         â”‚ Validation Fails â”‚                                     â”‚
â”‚         â”‚         â–¼        â”‚                                     â”‚
â”‚         â”‚  Show error      â”‚                                     â”‚
â”‚         â”‚  message         â”‚                                     â”‚
â”‚         â”‚                  â”‚                                     â”‚
â”‚  Validation Passes         â”‚                                     â”‚
â”‚         â”‚                  â”‚                                     â”‚
â”‚         â–¼                  â”‚                                     â”‚
â”‚  4. Return company preview â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚                                     â”‚
â”‚  â”‚ ğŸ¢ TechCorp Ltd   â”‚     â”‚                                     â”‚
â”‚  â”‚ ğŸ“ Sofia, BG      â”‚     â”‚                                     â”‚
â”‚  â”‚ ğŸ‘¥ 15 members     â”‚     â”‚                                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                     â”‚
â”‚         â”‚                  â”‚                                     â”‚
â”‚         â–¼                  â”‚                                     â”‚
â”‚  5. User confirms joining  â”‚                                     â”‚
â”‚         â”‚                  â”‚                                     â”‚
â”‚         â–¼                  â”‚                                     â”‚
â”‚  6. Create CompanyMember:  â”‚                                     â”‚
â”‚     â€¢ userId: current user â”‚                                     â”‚
â”‚     â€¢ companyId: company   â”‚                                     â”‚
â”‚     â€¢ defaultRole: MEMBER  â”‚                                     â”‚
â”‚     â€¢ status: ACTIVE       â”‚                                     â”‚
â”‚         â”‚                  â”‚                                     â”‚
â”‚         â–¼                  â”‚                                     â”‚
â”‚  7. Update User:           â”‚                                     â”‚
â”‚     â€¢ role: TEAM_MEMBER    â”‚                                     â”‚
â”‚     â€¢ onboardingComplete   â”‚                                     â”‚
â”‚         â”‚                  â”‚                                     â”‚
â”‚         â–¼                  â”‚                                     â”‚
â”‚  8. Create audit log       â”‚                                     â”‚
â”‚     CompanyCodeJoin        â”‚                                     â”‚
â”‚         â”‚                  â”‚                                     â”‚
â”‚         â–¼                  â”‚                                     â”‚
â”‚  9. Redirect to            â”‚                                     â”‚
â”‚     /dashboard/company     â”‚                                     â”‚
â”‚                            â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ›¡ï¸ Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Security Measures                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Code Generation Security:                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  â€¢ Cryptographically secure random (crypto API)      â”‚        â”‚
â”‚  â”‚  â€¢ 16 characters = ~2.8 billion combinations         â”‚        â”‚
â”‚  â”‚  â€¢ No ambiguous characters (0,O,1,I,L excluded)      â”‚        â”‚
â”‚  â”‚  â€¢ Unique constraint in database                     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                  â”‚
â”‚  Rate Limiting:                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  â€¢ Max 5 code attempts per IP per hour               â”‚        â”‚
â”‚  â”‚  â€¢ Max 3 code regenerations per day                  â”‚        â”‚
â”‚  â”‚  â€¢ 5-minute cooldown between regenerations           â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                  â”‚
â”‚  Audit Trail:                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  CompanyCodeJoin {                                   â”‚        â”‚
â”‚  â”‚    userId     â†’ Who joined                           â”‚        â”‚
â”‚  â”‚    companyId  â†’ Which company                        â”‚        â”‚
â”‚  â”‚    joinedAt   â†’ When                                 â”‚        â”‚
â”‚  â”‚    ipAddress  â†’ From where                           â”‚        â”‚
â”‚  â”‚    userAgent  â†’ What device/browser                  â”‚        â”‚
â”‚  â”‚  }                                                   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                  â”‚
â”‚  Code Management:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  â€¢ Only OWNER and ADMIN can view/manage code         â”‚        â”‚
â”‚  â”‚  â€¢ Code masked by default (reveal on click)          â”‚        â”‚
â”‚  â”‚  â€¢ Notification sent when code is used               â”‚        â”‚
â”‚  â”‚  â€¢ Optional expiration date                          â”‚        â”‚
â”‚  â”‚  â€¢ Optional max member limit                         â”‚        â”‚
â”‚  â”‚  â€¢ Can be disabled temporarily                       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ File Structure Changes

```
LynkSkill/
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma              # Updated with new models
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ company-code.ts            # NEW - Code generation utilities
â”‚   â””â”€â”€ permissions.ts             # Updated - Add MEMBER permissions
â”‚
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ onboarding/
â”‚   â”‚   â””â”€â”€ page.tsx               # Updated - Add team member option
â”‚   â”‚
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ company/
â”‚           â”œâ”€â”€ create/
â”‚           â”‚   â””â”€â”€ route.ts       # Updated - Generate code on create
â”‚           â”‚
â”‚           â”œâ”€â”€ code/              # NEW - Code management endpoints
â”‚           â”‚   â”œâ”€â”€ route.ts       # GET current code
â”‚           â”‚   â”œâ”€â”€ regenerate/
â”‚           â”‚   â”‚   â””â”€â”€ route.ts   # POST regenerate code
â”‚           â”‚   â”œâ”€â”€ toggle/
â”‚           â”‚   â”‚   â””â”€â”€ route.ts   # PATCH enable/disable
â”‚           â”‚   â””â”€â”€ history/
â”‚           â”‚       â””â”€â”€ route.ts   # GET join history
â”‚           â”‚
â”‚           â”œâ”€â”€ join/              # NEW - Join via code
â”‚           â”‚   â””â”€â”€ route.ts       # POST validate & join
â”‚           â”‚
â”‚           â””â”€â”€ invitations/
â”‚               â””â”€â”€ route.ts       # Updated - Add restrictions
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ onboarding/
â”‚   â”‚   â””â”€â”€ team-member-step.tsx   # NEW - Code entry UI
â”‚   â”‚
â”‚   â””â”€â”€ team/
â”‚       â”œâ”€â”€ team-code-settings.tsx # NEW - Code management UI
â”‚       â”œâ”€â”€ join-history.tsx       # NEW - View join history
â”‚       â””â”€â”€ invite-member-modal.tsx# Updated - Add restrictions
â”‚
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ backfill-company-codes.ts  # NEW - Migration script
â”‚
â””â”€â”€ types/
    â””â”€â”€ index.ts                   # Updated - New types
```

---

*Document created: February 5, 2026*
